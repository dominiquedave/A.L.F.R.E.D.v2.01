<!DOCTYPE html>
<html lang="en" class="dark-theme">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}A.L.F.R.E.D. Bat Cave Console{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', path='/css/bat-theme.css') }}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Creepster&family=Nosifer&family=Orbitron:wght@300;400;700;900&display=swap" rel="stylesheet">
    {% block extra_head %}{% endblock %}
</head>
<body class="bat-cave-body">
    <!-- Animated bat silhouettes -->
    <div class="bat-swarm">
        <div class="bat bat-1">🦇</div>
        <div class="bat bat-2">🦇</div>
        <div class="bat bat-3">🦇</div>
        <div class="bat bat-4">🦇</div>
        <div class="bat bat-5">🦇</div>
    </div>
    
    <!-- Main navigation -->
    <nav class="bat-nav">
        <div class="nav-container">
            <div class="nav-brand">
                <span class="bat-logo">🦇</span>
                <h1 class="nav-title">A.L.F.R.E.D.</h1>
                <span class="nav-subtitle">Bat Cave Console</span>
            </div>
            <div class="nav-links">
                <a href="/" class="nav-link {% if request.url.path == '/' %}active{% endif %}">
                    <span class="nav-icon">🏠</span>
                    Cave Dashboard
                </a>
                <a href="#" class="nav-link" onclick="discoverAgents()">
                    <span class="nav-icon">🔍</span>
                    Scan Territory
                </a>
                <div class="nav-status">
                    <span class="status-indicator" id="connection-status">
                        <span class="pulse-dot"></span>
                        Connected to Lair
                    </span>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main content area -->
    <main class="main-content">
        <div class="content-container">
            {% block content %}{% endblock %}
        </div>
    </main>

    <!-- Status bar -->
    <footer class="status-bar">
        <div class="status-container">
            <div class="status-section">
                <span class="status-label">System:</span>
                <span class="status-value" id="system-status">Active</span>
            </div>
            <div class="status-section">
                <span class="status-label">Agents:</span>
                <span class="status-value" id="agent-count">{{ healthy_agents }}/{{ total_agents }}</span>
            </div>
            <div class="status-section">
                <span class="status-label">Last Update:</span>
                <span class="status-value" id="last-update">Now</span>
            </div>
        </div>
    </footer>

    <!-- Notification container -->
    <div id="notifications" class="notifications-container"></div>

    <script src="{{ url_for('static', path='/js/bat-console.js') }}"></script>
    {% block extra_scripts %}{% endblock %}
</body>
</html>